procgen-apex:
  env: procgen_env_wrapper # Change this at your own risk :D
  run: APEX
  stop:
    timesteps_total: 8000000

  checkpoint_freq: 100
  checkpoint_at_end: True
  keep_checkpoints_num: 5

  config:
    env_config:
      env_name: coinrun
      num_levels: 0
      start_level: 0
      paint_vel_info: False
      use_generated_assets: False
      center_agent: True
      use_sequential_levels: True
      distribution_mode: easy

    double_q: False
    dueling: False
    num_atoms: 1
    noisy: False
    n_step: 3
    lr: .0001
    adam_epsilon: .00015
    buffer_size: 500000 # ~ 6GB of memory
    exploration_config:
      type: EpsilonGreedy
      final_epsilon: 0.01
      epsilon_timesteps: 200000
    prioritized_replay_alpha: 0.5
    final_prioritized_replay_beta: 1.0
    prioritized_replay_beta_annealing_timesteps: 2000000

    num_gpus: 1
    num_cpus_per_worker: 1
    num_gpus_per_worker: 0
    num_cpus_for_driver: 1

    # APEX
    num_workers: 14
    num_envs_per_worker: 8
    sample_batch_size: 20
    train_batch_size: 500
    target_network_update_freq: 50000
    timesteps_per_iteration: 25000

    model:
      dim: 64
      conv_filters: [[16, [3, 3], 1], [32, [3, 3], 1], [32, [3, 3], 1]]
      conv_activation: relu
      fcnet_hiddens: [256]
      fcnet_activation: tanh
      custom_model: my_vision_network
      custom_options: {}

    ignore_worker_failures: True
    log_sys_usage: True
